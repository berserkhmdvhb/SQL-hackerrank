(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4453],{33237:function(e,r,n){"use strict";n.d(r,{J:function(){return h}});var t,a="https://js.stripe.com/v3",i=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,s=function(){for(var e=document.querySelectorAll('script[src^="'.concat(a,'"]')),r=0;r<e.length;r++){var n=e[r];if(i.test(n.src))return n}return null},l=function(e){var r=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(a).concat(r);var t=document.head||document.body;if(!t)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(n),n},o=function(e,r){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:r})},u=null,c=null,d=null,m=function(e,r,n){if(null===e)return null;var t=e.apply(void 0,r);return o(t,n),t},f=!1,p=function(){return t||(t=(null!==u?u:(u=new Promise(function(e,r){if("undefined"==typeof window||"undefined"==typeof document){e(null);return}if(window.Stripe,window.Stripe){e(window.Stripe);return}try{var n,t=s();t?t&&null!==d&&null!==c&&(t.removeEventListener("load",d),t.removeEventListener("error",c),null===(n=t.parentNode)||void 0===n||n.removeChild(t),t=l(null)):t=l(null),d=function(){window.Stripe?e(window.Stripe):r(Error("Stripe.js not available"))},c=function(){r(Error("Failed to load Stripe.js"))},t.addEventListener("load",d),t.addEventListener("error",c)}catch(e){r(e);return}})).catch(function(e){return u=null,Promise.reject(e)})).catch(function(e){return t=null,Promise.reject(e)}))};Promise.resolve().then(function(){return p()}).catch(function(e){f||console.warn(e)});var h=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];f=!0;var t=Date.now();return p().then(function(e){return m(e,r,t)})}},26997:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account-settings",function(){return n(51166)}])},28424:function(e,r,n){"use strict";n.d(r,{QO:function(){return c},gZ:function(){return f},_K:function(){return x}});var t=n(28598),a=n(82684),i=n(49452),s=n(78239),l=n(14737),o=n(68337),u=n(50039),c=function(e){let r=r=>{let{isLoading:n,user:o}=(0,s.aF)(),{isOpen:c,onOpen:d,onClose:m}=(0,i.q)();return(0,a.useEffect)(()=>{n||o||d()},[o,n,d]),(0,t.jsx)(t.Fragment,{children:n?(0,t.jsx)(u.A,{children:(0,t.jsx)(l.aN,{})}):(0,t.jsx)(t.Fragment,{children:o?(0,t.jsx)(e,{...r}):(0,t.jsx)(l._A,{isModalOpen:c,onClose:m})})})};return r.displayName="WithAuth(".concat((0,o.lF)(e),")"),r},d=n(86105),m=n(34376),f=function(e){let r=r=>{let{user:n}=(0,s.aF)(),{push:i}=(0,m.useRouter)(),c=(0,o.jI)(n);return(0,a.useEffect)(()=>{n&&!c&&i(d.Z5.Pricing)},[n]),(0,t.jsx)(u.A,{children:c?(0,t.jsx)(e,{...r}):(0,t.jsx)(l.aN,{})})};return r.displayName="WithPremium(".concat((0,o.lF)(e),")"),r},p=n(91760);let h=(0,n(33237).J)(d.J0);var x=function(e){let r=r=>(0,t.jsx)(p.Elements,{stripe:h,children:(0,t.jsx)(e,{...r})});return r.displayName="WithStripe(".concat((0,o.lF)(e),")"),r}},51166:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return J}});var t=n(28598),a=n(82684),i=n(52154),s=n(35585),l=n(29101),o=n(46171),u=n(30665),c=n(26923),d=n(1390),m=n(57159),f=n(71324),p=n(5157),h=n(80552),x=(0,d.G)(function(e,r){var n;let a=(0,m.mq)("FormLabel",e),i=(0,f.Lr)(e),{className:s,children:l,requiredIndicator:o=(0,t.jsx)(v,{}),optionalIndicator:u=null,...d}=i,x=(0,c.NJ)(),g=null!=(n=null==x?void 0:x.getLabelProps(d,r))?n:{ref:r,...d};return(0,t.jsxs)(p.m.label,{...g,className:(0,h.cx)("chakra-form__label",i.className),__css:{display:"block",textAlign:"start",...a},children:[l,(null==x?void 0:x.isRequired)?o:u]})});x.displayName="FormLabel";var v=(0,d.G)(function(e,r){let n=(0,c.NJ)(),a=(0,c.e)();if(!(null==n?void 0:n.isRequired))return null;let i=(0,h.cx)("chakra-form__required-indicator",e.className);return(0,t.jsx)(p.m.span,{...null==n?void 0:n.getRequiredIndicatorProps(e,r),__css:a.requiredIndicator,className:i})});v.displayName="RequiredIndicator";var g=n(19930),j=n(18001),[N,_]=(0,n(44691).k)({name:"FormErrorStylesContext",errorMessage:"useFormErrorStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormError />\" "}),y=(0,d.G)((e,r)=>{let n=(0,m.jC)("FormError",e),a=(0,f.Lr)(e),i=(0,c.NJ)();return(null==i?void 0:i.isInvalid)?(0,t.jsx)(N,{value:n,children:(0,t.jsx)(p.m.div,{...null==i?void 0:i.getErrorMessageProps(a,r),className:(0,h.cx)("chakra-form__error-message",e.className),__css:{display:"flex",alignItems:"center",...n.text}})}):null});y.displayName="FormErrorMessage",(0,d.G)((e,r)=>{let n=_(),a=(0,c.NJ)();if(!(null==a?void 0:a.isInvalid))return null;let i=(0,h.cx)("chakra-form__error-icon",e.className);return(0,t.jsx)(j.J,{ref:r,"aria-hidden":!0,...e,__css:n.icon,className:i,children:(0,t.jsx)("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}).displayName="FormErrorIcon";var w=n(5764),S=n(81799),b=n(25108),E=n(14737),F=n(50039),A=n(78239),k=n(17603),C=n(68337),P=n(86105),I=n(28424),q=n(60988),D=n(65359),L=n.n(D);let M={mainError:"".concat("Please enter"," username if you want to update it."),minError:"Username must be at least ".concat(3," characters"),maxError:"Username must be at most ".concat(20," characters")},z=S.Ry({userName:S.Z_().min(3,M.minError).max(20,M.maxError).required(M.mainError)});var J=(0,I.QO)(()=>{let{user:e,updateUser:r}=(0,A.aF)(),n=(0,a.useRef)(null),[d,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(null),[h,v]=(0,a.useState)(!1),j=e?(0,C.vW)(e):"",N=(null==e?void 0:e.avatar)&&(0,C.E$)(e.avatar),_=(0,C.lt)(e),S=(0,b.TA)({initialValues:{userName:j},validationSchema:z,onSubmit:async(n,t)=>{if(""===n.userName.trim()||!e){t.setValues({userName:""});return}try{t.setSubmitting(!0),await k.KD.updateUsersDataById(e.id,{user_name:n.userName},{},!1),r({userName:n.userName}),p(null),t.resetForm({values:{userName:n.userName}})}catch(e){k.Yd.error(e)}finally{t.setSubmitting(!1)}}}),I=async e=>{var n;let t=(null===(n=e.target.files)||void 0===n?void 0:n.length)&&e.target.files[0];if(t&&["image/png","image/jpeg","image/jpg","image/gif"].includes(t.type)){if(t.size>P.w9){m(!0);return}v(!0);try{let e=new FormData;e.append("file",t,(0,C.cX)("avatar",t.name));let n=await k.KD.updateAvatar(e.getAll("file"));r({avatar:n.avatar}),p(null)}catch(e){k.Yd.error(e)}finally{v(!1)}}},D=(0,a.useCallback)(async()=>{e&&p(await k.KD.resetPassword(null==e?void 0:e.email))},[e]);return(0,t.jsx)(F.A,{children:(0,t.jsx)(i.M,{children:(0,t.jsxs)(s.k,{flexDir:"column",alignItems:"center",maxW:"500px",w:"100%",px:"16px",children:[(0,t.jsx)(l.X,{as:"h1",mt:"50px",textAlign:"center",children:"User Details"}),(0,t.jsx)(o.x,{mt:"8px",fontSize:"20px",color:"gray.400",children:null==e?void 0:e.userName}),(0,t.jsx)(u.q,{src:N,size:"2xl",mt:"32px",mb:"40px",name:j,children:h&&(0,t.jsx)(s.k,{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",children:(0,t.jsx)(E.aN,{})})}),d&&(0,t.jsx)(o.x,{fontSize:"14px",color:"red.500",textAlign:"center",children:"Avatar size should be less then 3 MB"}),(0,t.jsx)("input",{hidden:!0,type:"file",accept:"image/png, image/gif, image/jpeg, image/jpg",ref:n,onChange:I}),(0,t.jsx)("form",{className:L().form,onSubmit:S.handleSubmit,name:"userDetails",children:(0,t.jsxs)(s.k,{flexDir:"column",w:"100%",children:[(0,t.jsxs)(c.NI,{isInvalid:!!S.errors.userName,children:[(0,t.jsx)(x,{children:"Username"}),(0,t.jsx)(g.I,{minH:"50px",focusBorderColor:"blue.300",name:"userName",type:"search",placeholder:"Username",onBlur:S.handleBlur,onChange:S.handleChange,value:S.values.userName}),(0,t.jsx)(y,{children:S.errors.userName})]}),(0,t.jsx)(w.z,{type:"submit",w:"100%",mt:"30px",mb:"20px",colorScheme:"red",isDisabled:S.isSubmitting||j===S.values.userName,isLoading:S.isSubmitting,children:"Update"}),_&&(0,t.jsx)(w.z,{w:"100%",colorScheme:"red",onClick:D,children:"Reset Password"}),f&&(0,t.jsx)(o.x,{fontSize:"14px",mt:"10px",color:f.status===q.v.Success?"green.500":"red.500",textAlign:"center",children:f.message})]})})]})})})})},65359:function(e){e.exports={form:"AccuntSettings_form__OQ11m"}}},function(e){e.O(0,[1265,3662,544,4737,9774,2888,179],function(){return e(e.s=26997)}),_N_E=e.O()}]);
//# sourceMappingURL=account-settings-a6b40d5e3d98823c.js.map